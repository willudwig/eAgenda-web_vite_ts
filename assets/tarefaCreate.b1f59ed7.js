var l=Object.defineProperty;var u=(a,t,e)=>t in a?l(a,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):a[t]=e;var i=(a,t,e)=>(u(a,typeof t!="symbol"?t+"":t,e),e);import"./modulepreload-polyfill.c7c6310f.js";/* empty css                      */import{E as h}from"./entidade.model.05f7a246.js";import{T as m}from"./tarefa.repository.local-storage.5362b98f.js";import{I as p}from"./item.repository.local-storage.b134efc8.js";class c extends h{constructor(e,o,r,n){super();i(this,"titulo");i(this,"dataCriacao");i(this,"dataConclusao");i(this,"prioridade");i(this,"porcentagem");n&&(this.id=n);const s=new Date;this.titulo=e,this.dataCriacao=s.getDate()+" / "+(s.getMonth()+1)+" / "+s.getFullYear(),this.dataConclusao="-",this.prioridade=o,this.porcentagem=r}}var d=(a=>(a.Baixa="Baixa",a.M\u00E9dia="M\xE9ida",a.Alta="Alta",a))(d||{});class f{constructor(t,e){i(this,"txtTitulo");i(this,"rdbPrioridade");i(this,"btnSalvar");i(this,"idSelecionado");if(this.repositorioTarefas=t,this.configurarElementos(),e){this.idSelecionado=e;const o=this.repositorioTarefas.selecionarPorId(e);o&&this.preencherFormulario(o)}}preencherFormulario(t){switch(this.txtTitulo.value=t.titulo,t.prioridade){case d.Baixa:this.rdbPrioridade=document.querySelector("input[value='Baixa']");break;case d.M\u00E9dia:this.rdbPrioridade=document.querySelector("input[value='M\xE9dia']");break;case d.Alta:this.rdbPrioridade=document.querySelector("input[value='Alta']");break}this.rdbPrioridade.checked=!0}obterDadosFormulario(){const t=this.txtTitulo.value,e=this.obterPrioridadeSelecionada(),o=this.calculrarPorcentagem(t);let r=null;return this.idSelecionado?r=new c(t,e,o,this.idSelecionado):r=new c(t,e,o),r}obterPrioridadeSelecionada(){return document.querySelector('input[type="radio"]:checked').value}configurarElementos(){this.txtTitulo=document.getElementById("txtDescricao"),this.btnSalvar=document.getElementById("btnSalvar"),this.btnSalvar.addEventListener("click",t=>this.gravarRegistros())}gravarRegistros(){const t=this.obterDadosFormulario();this.idSelecionado?this.repositorioTarefas.editar(t.id,t):this.repositorioTarefas.inserir(t),window.location.href="tarefa.list.html"}calculrarPorcentagem(t){let e=100;const o=new p().selecionarTodos(),r=[];if(o.forEach(s=>{s.tarefa===t&&r.push(s)}),r.length===0)return"0%";let n=0;return r.forEach(s=>{s.status==="Conclu\xEDdo"&&n++}),e=e*n/r.length,e.toFixed(2).toString()+"%"}}const g=new URLSearchParams(window.location.search),S=g.get("id");new f(new m,S);
