var s=Object.defineProperty;var l=(r,t,e)=>t in r?s(r,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[t]=e;var c=(r,t,e)=>(l(r,typeof t!="symbol"?t+"":t,e),e);import"./modulepreload-polyfill.c7c6310f.js";/* empty css                      */import{T as u}from"./tarefa.repository.local-storage.5362b98f.js";import{I as d}from"./item.repository.local-storage.b134efc8.js";class m{constructor(t){c(this,"tabela");this.repositrorioTarefas=t,this.configurarElementos(),this.atualizarTabela()}atualizarTabela(){const t=this.repositrorioTarefas.selecionarTodos();let e=this.tabela.getElementsByTagName("tbody")[0];t.forEach(o=>{const a=e.insertRow();o.porcentagem=this.calculrarPorcentagem(o.titulo),o.dataConclusao=this.verficarDataConclusao(o.porcentagem),Object.values(o).forEach(i=>{const n=a.insertCell();n.innerText=i}),this.criarBotaoEditar(a,o),this.criarBotaoExcluir(a,o)})}criarBotaoEditar(t,e){const o=t.insertCell(),a=document.createElement("a");a.innerText="Editar",a.className="btn btn-outline-success",a.addEventListener("click",()=>{window.location.href=`tarefa.create.html?id=${e.id}`}),o.appendChild(a)}criarBotaoExcluir(t,e){const o=t.insertCell(),a=document.createElement("a");a.innerText="Excluir",a.className="btn btn-outline-info",a.addEventListener("click",()=>{this.repositrorioTarefas.excluir(e.id),window.location.reload()}),o.appendChild(a)}configurarElementos(){this.tabela=document.getElementById("tabela")}calculrarPorcentagem(t){let e=100;const o=new d().selecionarTodos(),a=[];if(o.forEach(n=>{n.tarefa===t&&a.push(n)}),a.length===0)return"0%";let i=0;return a.forEach(n=>{n.status==="Conclu\xEDdo"&&i++}),e=e*i/a.length,e.toFixed(2).toString()+"%"}verficarDataConclusao(t){if(t==="100.00%"){const e=new Date;return e.getDate()+" / "+(e.getMonth()+1)+" / "+e.getFullYear()}return"-"}}new m(new u);
